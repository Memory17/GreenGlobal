/* src/style/Header.css */

/* --- Biến CSS (Variables) --- */
:root {
  --primary-color: #1677ff;
  --primary-hover-color: #4096ff;
  --header-bg: #ffffff;
  --header-text-color: #333;
  --header-border-color: #f0f0f0;
  --header-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  --header-height: 68px;
  --search-bg: #f3f4f6; /* Màu nền xám nhạt cho thanh tìm kiếm */
}

body.dark-mode {
  --header-bg: #141414;
  --header-text-color: #ffffff;
  --header-border-color: #303030;
  --header-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  --search-bg: #1f1f1f;
}

/*
 * ===================================================================
 * 1. MAIN HEADER CONTAINER (Giữ nguyên)
 * ===================================================================
 */
.ant-layout-header {
  display: flex;
  align-items: center;
  background: var(--header-bg) !important;
  padding: 0 40px;
  height: var(--header-height) !important;
  line-height: normal !important;
  position: fixed !important;
  top: 0;
  z-index: 1000;
  width: 100%;
  box-shadow: var(--header-shadow) !important;
  transition: all 0.3s ease;
}

/*
 * ===================================================================
 * 2. LOGO (Giữ nguyên)
 * ===================================================================
 */
.header-logo {
  cursor: pointer;
  display: flex;
  align-items: center;
  transition: transform 0.3s ease;
  flex-shrink: 0;
}

.header-logo:hover {
  transform: scale(1.05);
}

.header-logo img {
  height: 45px;
  object-fit: contain;
  border-radius: 8px;
}

/*
 * ===================================================================
 * 3. DESKTOP - NAVIGATION MENU (Giữ nguyên)
 * ===================================================================
 */
.desktop-menu-container {
  flex: 1;
  display: flex;
  justify-content: flex-start;
  margin-left: -100px;
}

.desktop-menu-container .ant-menu {
  border-bottom: none !important;
  background: transparent !important;
  line-height: calc(var(--header-height) - 4px) !important;
  width: auto; 
}

.desktop-menu-container .ant-menu-item {
  font-size: 16px;
  font-weight: 500; 
  color: var(--header-text-color) !important;
  transition: all 0.3s ease;
  border-top: 3px solid transparent; 
  border-bottom: 3px solid transparent !important; 
  margin-top: -1px; 
}

.desktop-menu-container .ant-menu-item:hover {
  color: var(--primary-color) !important;
  border-bottom-color: var(--primary-hover-color) !important;
}

.desktop-menu-container .ant-menu-item-selected {
  color: var(--primary-color) !important;
  border-bottom-color: var(--primary-color) !important;
}

.desktop-menu-container .ant-menu-item::after,
.desktop-menu-container .ant-menu-item-selected::after {
  border-bottom: none !important;
}

/*
 * ===================================================================
 * 4. DESKTOP - CATEGORIES DROPDOWN (Giữ nguyên)
 * ===================================================================
 */
@keyframes categoriesDropdownFadeIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

.desktop-categories-dropdown {
  display: block;
  position: absolute; 
  top: var(--header-height);
  left: 0;
  width: 100%;
  z-index: 99; 
}

.categories-full-width-dropdown {
  background: var(--header-bg);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  border-top: 1px solid var(--header-border-color);
  animation: categoriesDropdownFadeIn 0.3s ease-out;
}

/*
 * ===================================================================
 * 5. DESKTOP - HEADER RIGHT (Container chứa search, cart, user)
 * ===================================================================
 */
.header-right-desktop {
  display: flex;
  align-items: center;
  gap: 20px; /* Khoảng cách giữa các phần tử */
  flex-shrink: 0;
  margin-left: auto;
}

/*
 * ===================================================================
 * 5.5. [NEW] MODERN SEARCH BAR STYLE (ICON BUTTON VERSION)
 * ===================================================================
 */

/* 1. Wrapper bao ngoài */
.modern-search-wrapper {
  position: relative;
  width: 240px; /* Chiều rộng mặc định */
  transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);

}

/* Fix background rectangle behind search bar in Dark Mode */
.modern-search-wrapper .ant-select,
.modern-search-wrapper .ant-select-selector,
.modern-search-wrapper .ant-select-single .ant-select-selector,
.modern-search-wrapper .ant-select-show-search .ant-select-selector,
.modern-search-wrapper .ant-select-selection-search,
.modern-search-wrapper .ant-select-selection-item,
.modern-search-wrapper .ant-select-selection-placeholder {
  background-color: transparent !important;
  background: transparent !important;
  background-image: none !important;
  border: none !important;
  box-shadow: none !important;
  border-radius: 0 !important;
}

/* Ensure no background on focus/active states of the container */
.modern-search-wrapper .ant-select-focused .ant-select-selector,
.modern-search-wrapper .ant-select:hover .ant-select-selector,
.modern-search-wrapper .ant-select-selector:focus-within,
.modern-search-wrapper .ant-select-selector:hover {
  background-color: transparent !important;
  background: transparent !important;
  box-shadow: none !important;
  border: none !important;
}

/* 2. Input Style (Dạng viên thuốc) */
.modern-search-input.ant-input-affix-wrapper {
  background-color: var(--search-bg);
  border: 1px solid transparent;
  border-radius: 50px; /* Bo tròn hoàn toàn */
  
  /* PADDING QUAN TRỌNG: 
     - Left: 20px để chữ không sát lề (vì đã bỏ icon kính lúp trái)
     - Right: 6px để chừa chỗ cho nút tròn bên phải 
  */
  padding: 4px 6px 4px 20px !important; 
  
  box-shadow: none;
  transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);
}

/* Dark Mode: Add border to search input */
body.dark-mode .modern-search-input.ant-input-affix-wrapper {
  border-color: #434343 !important;
}

/* Input text bên trong */
.modern-search-input input.ant-input {
  background-color: transparent !important;
  font-size: 14px;
  color: var(--header-text-color);
}

/* 3. Hiệu ứng khi Focus (Click vào thanh tìm kiếm) */
.modern-search-input.ant-input-affix-wrapper-focused,
.modern-search-input.ant-input-affix-wrapper:hover {
  background-color: #ffffff;
  border-color: var(--primary-color);
  box-shadow: 0 4px 15px rgba(22, 119, 255, 0.15); /* Bóng đổ xanh nhẹ */
}

/* Khi focus, wrapper cha giãn rộng ra */
.modern-search-wrapper:focus-within {
  width: 300px; /* Giãn rộng ra */
}

/* * 4. NÚT ICON TÌM KIẾM TRÒN (THAY ĐỔI CHÍNH)
 * Style tạo hình tròn chứa icon Search
 */
.search-btn-custom {
  /* Kích thước hình tròn */
  width: 34px; 
  height: 34px;
  
  /* Căn giữa icon kính lúp */
  display: flex;
  align-items: center;
  justify-content: center;
  
  /* Đẩy nút sát về phía bên phải của thanh input */
  margin-right: -2px; 
  
  /* Màu sắc Gradient & Bo tròn hoàn toàn */
  background: linear-gradient(135deg, #1677ff 0%, #0050b3 100%);
  border-radius: 50%; 
  
  /* Hiệu ứng & Cursor */
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(22, 119, 255, 0.3);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Style riêng cho cái Icon kính lúp bên trong */
.search-btn-custom .anticon {
  font-size: 16px;
  color: white;
  font-weight: bold;
}

/* --- HIỆU ỨNG TƯƠNG TÁC NÚT --- */

/* Hover: Nút to lên xíu và bóng đổ đậm hơn */
.search-btn-custom:hover {
  transform: scale(1.1); /* Phóng to 10% */
  box-shadow: 0 4px 12px rgba(22, 119, 255, 0.5);
  background: linear-gradient(135deg, #4096ff 0%, #1677ff 100%);
}

/* Active: Nhún xuống khi click */
.search-btn-custom:active {
  transform: scale(0.95);
  box-shadow: 0 2px 4px rgba(22, 119, 255, 0.3);
}

/*
 * ===================================================================
 * 5.6. STYLE CHO DROPDOWN GỢI Ý (Autocomplete Popup)
 * ===================================================================
 */
.modern-search-dropdown .ant-select-dropdown {
  border-radius: 12px;
  padding: 6px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
  border: 1px solid #f0f0f0;
  overflow: hidden;
}

.modern-search-dropdown .ant-select-item {
  border-radius: 8px;
  margin-bottom: 2px;
  padding: 8px 12px;
  transition: all 0.2s;
}

.modern-search-dropdown .ant-select-item-option-active {
  background-color: #e6f7ff !important; /* Xanh nhạt khi hover */
}

/* Style cho nội dung item (Ảnh + Tên + Giá) */
.modern-search-dropdown .ant-select-item-option-content div {
  display: flex;
  align-items: center;
}

/* Dark mode for search dropdown */
body.dark-mode .modern-search-dropdown .ant-select-dropdown {
  background-color: #1f1f1f;
  border-color: #303030;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
}

body.dark-mode .modern-search-dropdown .ant-select-item {
  color: #ffffff;
}

body.dark-mode .modern-search-dropdown .ant-select-item-option-active {
  background-color: #303030 !important;
}

/*
 * ===================================================================
 * 6. CART ICON (Giữ nguyên)
 * ===================================================================
 */
.header-right-desktop .ant-badge {
  cursor: pointer;
  transition: transform 0.3s ease;
}

.header-right-desktop .ant-badge:hover {
  transform: scale(1.1);
}

.header-right-desktop .ant-shopping-cart-outlined,
.header-cart-badge .anticon-shopping-cart {
  font-size: 26px !important;
  color: var(--header-text-color);
  transition: color 0.3s ease;
}

.header-right-desktop .ant-badge:hover .ant-shopping-cart-outlined,
.header-cart-badge:hover .anticon-shopping-cart {
  color: var(--primary-color);
}

.header-notification-icon {
  color: var(--header-text-color) !important;
  transition: color 0.3s ease;
}

.header-right-desktop .ant-badge-count {
  background-color: #ff4d4f;
  box-shadow: 0 0 10px rgba(255, 77, 79, 0.7);
  font-weight: 600;
}

/*
 * ===================================================================
 * 7. USER AVATAR & DROPDOWN (Giữ nguyên)
 * ===================================================================
 */
.header-right-desktop .ant-space-item > .ant-avatar {
  border: 2px solid transparent;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
  transition: all 0.3s ease;
  cursor: pointer;
}

.header-right-desktop .ant-space:hover .ant-avatar {
  transform: scale(1.1);
  border-color: var(--primary-color);
}

.header-right-desktop .ant-space .anticon-down {
  transition: transform 0.3s ease;
  font-size: 12px;
  color: #888;
}

.header-right-desktop .ant-dropdown-open .anticon-down {
  transform: rotate(180deg);
}

/*
 * ===================================================================
 * 8. BUTTONS (Login/Logout) (Giữ nguyên)
 * ===================================================================
 */
.header-right-desktop .ant-btn-primary {
  border-radius: 20px;
  font-weight: 600;
  box-shadow: 0 4px 12px rgba(22, 119, 255, 0.2);
  transition: all 0.3s ease;
}

.header-right-desktop .ant-btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(22, 119, 255, 0.3);
}

/*
 * ===================================================================
 * 9. RESPONSIVE & MOBILE STYLES
 * ===================================================================
 */
.mobile-burger {
  display: none;
  border-radius: 8px;
}

/* Search bar trong Drawer Mobile (Giữ style cũ đơn giản cho mobile) */
.drawer-search .ant-input {
  border-radius: 20px;
}
.drawer-search .ant-input-search-button {
  border-radius: 0 20px 20px 0 !important;
}

@media (max-width: 991px) { 
  /* Ẩn desktop menu */
  .desktop-menu-container,
  .header-right-desktop,
  .desktop-categories-dropdown {
    display: none !important;
  }

  /* Hiện burger */
  .mobile-burger {
    display: block !important;
  }

  .ant-layout-header {
    justify-content: space-between !important; 
    padding: 0 16px !important;
    height: 64px !important; 
  }

  .header-logo img {
    height: 35px;
  }
}

/*
 * ===================================================================
 * 10. DRAWER MENU STYLES (Giữ nguyên)
 * ===================================================================
 */
.ant-drawer .ant-menu-vertical {
   border-right: none !important;
}
.ant-drawer .ant-menu-item {
   font-size: 16px;
   margin-block: 4px !important;
   border-radius: 8px;
}
.ant-drawer .ant-menu-item-selected {
   background-color: rgba(22, 119, 255, 0.1) !important;
   color: var(--primary-color) !important;
   font-weight: 500 !important;
}

/* --- NOTIFICATION DRAWER DARK MODE --- */
body.dark-mode .ant-drawer-content {
  background-color: #141414;
  color: #ffffff;
}

body.dark-mode .ant-drawer-header {
  background-color: #141414;
  border-bottom: 1px solid #303030;
}

body.dark-mode .ant-drawer-title {
  color: #ffffff;
}

body.dark-mode .ant-drawer-close {
  color: #ffffff;
}

body.dark-mode .ant-list-item-meta-title > div > .ant-typography {
  color: #ffffff !important;
}

body.dark-mode .ant-list-item-meta-title > div > .ant-typography-secondary {
  color: rgba(255, 255, 255, 0.45) !important;
}

body.dark-mode .ant-list-item-meta-description .ant-typography {
  color: rgba(255, 255, 255, 0.85);
}

body.dark-mode .ant-list-item-meta-description b {
  color: #ffffff;
}

body.dark-mode .ant-list-item-meta-description p {
  color: rgba(255, 255, 255, 0.65) !important;
}

/* Notification Item Background in Dark Mode */
body.dark-mode .ant-list-item {
  border-bottom: 1px solid #303030;
}

body.dark-mode .ant-list-item:hover {
  background-color: #1f1f1f !important;
}

/* New Notification Highlight in Dark Mode */
body.dark-mode .notification-new {
  background-color: #111d2c !important; /* Dark blue tint */
  border-left-color: #177ddc !important;
}

/* Empty State Text */
body.dark-mode .ant-empty-description {
  color: rgba(255, 255, 255, 0.45);
}

/* --- Style chung cho cả 2 nút --- */
.header-login-btn,
.header-logout-btn {
  border-radius: 50px !important; /* Bo tròn dạng viên thuốc */
  font-weight: 600 !important;
  border: 2px solid transparent !important; /* Thêm viền trong suốt để giữ layout ổn định khi hover */
  transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) !important;
  height: 40px !important;
  padding: 0 24px !important;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* --- Nút Đăng nhập (Primary Action) --- */
.header-login-btn {
  /* Nền Gradient hiện đại */
  background: linear-gradient(135deg, #1677ff 0%, #0050b3 100%) !important;
  color: white !important;
  box-shadow: 0 6px 20px rgba(22, 119, 255, 0.25);
}

.header-login-btn:hover {
  transform: translateY(-3px) scale(1.05); /* Nâng lên và phóng to nhẹ */
  box-shadow: 0 10px 25px rgba(22, 119, 255, 0.4); /* Bóng đổ đậm hơn */
}

.header-login-btn:active {
  transform: translateY(-1px) scale(1);
}

/* --- Nút Đăng xuất (Secondary/Danger Action) --- */
.header-logout-btn {
  /* Style "Ghost" - chỉ có viền */
  background: transparent !important;
  border-color: #ff7875 !important; /* Viền màu đỏ nhạt (AntD red-4) */
  color: #ff4d4f !important; /* Chữ màu đỏ (AntD red-5) */
  box-shadow: none !important;
}

.header-logout-btn:hover {
  /* Hiệu ứng Fill-in khi hover */
  background: #ff4d4f !important;
  border-color: #ff4d4f !important;
  color: white !important;
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(255, 77, 79, 0.3);
}

.header-logout-btn:active {
  transform: translateY(-1px);
}

/* --- CART POPOVER STYLES --- */
.cart-popover-overlay .ant-popover-inner {
  border-radius: 16px;
  padding: 0;
  overflow: hidden;
}

.cart-popover-content {
  max-width: 320px;
  padding: 4px;
}

.cart-popover-header {
  display: flex;
  align-items: flex-start;
  gap: 16px;
  margin-bottom: 16px;
}

.cart-popover-icon {
  background-color: #fff1f0;
  padding: 12px;
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 8px rgba(255, 77, 79, 0.15);
}

.cart-popover-title {
  font-size: 16px !important;
  display: block !important;
  margin-bottom: 4px !important;
  color: #262626 !important;
}

.cart-popover-desc {
  font-size: 14px !important;
  line-height: 1.5 !important;
  color: rgba(0, 0, 0, 0.45); /* Default secondary text color */
}

/* --- CART POPOVER DARK MODE --- */
body.dark-mode .cart-popover-overlay .ant-popover-inner,
body.dark-mode .cart-popover-overlay .ant-popover-arrow::before {
  background-color: #1f1f1f !important;
  box-shadow: 0 6px 16px 0 rgba(0, 0, 0, 0.4), 0 3px 6px -4px rgba(0, 0, 0, 0.48), 0 9px 28px 8px rgba(0, 0, 0, 0.2);
}

body.dark-mode .cart-popover-icon {
  background-color: #2a1215; /* Darker red background for dark mode */
  box-shadow: none;
}

body.dark-mode .cart-popover-title {
  color: #ffffff !important;
}

body.dark-mode .cart-popover-desc {
  color: rgba(255, 255, 255, 0.65) !important;
}